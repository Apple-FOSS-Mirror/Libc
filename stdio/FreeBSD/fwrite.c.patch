--- fwrite.c.orig	2009-12-08 00:25:43.000000000 -0800
+++ fwrite.c	2009-12-08 00:25:12.000000000 -0800
@@ -61,9 +61,10 @@ fwrite(buf, size, count, fp)
 	 * ANSI and SUSv2 require a return value of 0 if size or count are 0.
 	 */
 	n = count * size;
+#if __DARWIN_UNIX03
 	if (n == 0)
 		return (0);
-
+#endif
 	iov.iov_base = (void *)buf;
 	uio.uio_resid = iov.iov_len = n;
 	uio.uio_iov = &iov;

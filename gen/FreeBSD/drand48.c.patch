--- drand48.c.orig	2009-11-07 14:51:37.000000000 -0800
+++ drand48.c	2009-11-07 14:51:39.000000000 -0800
@@ -16,10 +16,10 @@ __FBSDID("$FreeBSD: src/lib/libc/gen/dra
 
 #include "rand48.h"
 
-extern unsigned short _rand48_seed[3];
-
 double
 drand48(void)
 {
-	return erand48(_rand48_seed);
+	ERAND48_BEGIN;
+	_DORAND48(_rand48_seed);
+	ERAND48_END(_rand48_seed);
 }
